# Progress – 2025-11-09

This update focuses on making Tutorial Mode usable and smooth on device with an online‑first model, while fixing cropping, auth friction, and noisy errors.

## Highlights

- YouTube player now sizes exactly to 16:9 inside its rounded container (no cropping on iPad/tablets).
- Online‑first Tutorial Mode: cloud sync only when authenticated, clear sign‑in banner, and live in‑page progress updates to 80%.
- Inline email/password modal (Sign In/Sign Up) with Forgot Password, Magic Link, and Resend Confirmation.
- Settings moved “Cloud Sync” to the top and shows signed‑in email; actions gated by auth state.
- Upsert/`onConflict` for tutorial progress to avoid duplicate key errors; fetches existing row if needed.
- Removed RNGetRandomValues dependency by swapping uuidv4 for a JS‑only ID generator in the sync queue.
- Fixed SuccessAnimation import and visibility to avoid “invalid element type” warnings.

## Files Changed

- app/components/VideoPlayer.tsx — dynamic sizing; duration callback.
- app/components/AuthModal.tsx — inline auth modal (email/password, reset, magic link, resend).
- app/screens/TutorialScreen.tsx — banner, live progress, success animation fix, auth modal hookup.
- app/screens/SettingsScreen.tsx — account section first; conditional actions; show email.
- app/stores/tutorialStore.ts — online‑first gating, auth state, percent merge, auth subscription.
- app/utils/sync/tutorialSync.ts — conflict‑aware upsert + fallback fetch.
- app/utils/id.ts, app/utils/sync/queue.ts — JS ID generator to remove RNGetRandomValues errors.

## Notes / Next

- If you still see a dev-only RCTPackagerConnection crash, restart Metro with `--reset-cache` and avoid legacy “Debug JS Remotely.”
- Optional: add a one‑tap “Demo login” wired to `.env` creds; reduce position save debounce to 2–3s.

